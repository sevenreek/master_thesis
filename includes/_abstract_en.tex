In the last few decades most acquisition systems have 
shifted to rely on Digital Signal Processing in lieu of the
previously necessary Analogue Processing. There are considerable
advantages to using digital components. They are less 
susceptible to thermal noise and electromagnetic interference.
Recently, ultra-high-speed Analogue to Digital Converters
have become available commercially, enabling the use of
digital processing, even where a horizontal resolution 
in the order of a nanosecond is necessary.
Using digital acquisition with such precision 
produces a large data throughput. By digitizing an analogue signal
to a single byte per sample at a sampling frequency of 1 GHz,
a gigabyte of data is produced every second. This makes it 
impossible to use Central Processing Units for real-time analysis.


Nuclear fusion experiments produce events that last
a few dozens or hundreds of nanoseconds. Digital acquisition systems
offer much better reconfigurability, so their use in experimental 
setups is preferable. To make it possible, the high data throughput 
of fast digitizers, has to be maintained throughout the entire processing pipeline.
This poses an important challenge that must be solved before 
new reactors are fully assembled.


One of the diagnostic systems that is implemented in the majority
of tokamaks is the Hard X-Ray Monitor. This system monitors the 
radiation spectrum produced by Runaway Electrons. Their mitigation
is crucial to the proper operation of a tokamak. Such systems
use PhotoMultiplier Tubes to measure X-Rays that appear when 
Runaway Electrons interact with the plasma facing components
producing Bremsstrahlung radiation.


This work describes a part of the Hard X-Ray Monitor system developed for 
the ITER tokamak, with a focus on real-time firmware processing
of PhotoMultiplier Tube signals in a Field Programmable Gate Array.
Different algorithms for pulse detection are described, compared 
in theory and simulated in software.
The methods are analyzed to find a compromise between complexity and accuracy.
Best methods are implemented in firmware and tested with a real radioactive sample.
Same approach is taken with digital shaping and Pulse Height Analysis.
The combined algorithms form a real-time spectroscopy solution.


The Hard X-Ray Monitor developed in this work can successfully 
detect and categorize pulses produced by a PMT, even when 
run at maximum digitizer speed of 1 GHz. No dead-time is 
introduced thanks to the use of custom binning and storage algorithms.
The firmware implementation of the solution used for the generation and storage of
the X-Ray spectra is described. Requirements for future digitizers are given.
Challenges of real-time acquisition are outlined and potential solutions
are proposed and tested in simple benchmarks. Some limitations in
current state-of-the-art digital signal processing are provided.

